// Generated by CoffeeScript 1.7.1
(function() {
  'use strict';
  angular.module('niblApp').controller('sidebarCtrl', function($scope, taskService, Restangular) {
    var resetSidebar;
    resetSidebar = function() {
      $scope.sidebarMode = 'news';
      return $scope.currentTask = {};
    };
    $scope.openTaskCreationForm = function() {
      $scope.currentTask = {};
      return $scope.sidebarMode = 'taskCreation';
    };
    $scope.openTaskEditForm = function(task) {
      $scope.currentTask = taskService.copy(task);
      return $scope.sidebarMode = 'taskEdition';
    };
    $scope.save = function(task) {
      if ($scope.sidebarMode === 'taskCreation') {
        taskService.create(task);
      } else {
        taskService.update(task);
      }
      return $scope.sidebarMode = 'taskDetail';
    };
    $scope.discard = function() {
      if ($scope.sidebarMode === 'taskCreation') {
        return resetSidebar();
      } else {
        return $scope.sidebarMode = 'taskDetail';
      }
    };
    $scope["delete"] = function(task) {
      resetSidebar();
      return taskService.remove(task);
    };
    return resetSidebar();
  });

}).call(this);
