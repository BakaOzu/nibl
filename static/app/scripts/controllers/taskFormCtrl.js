// Generated by CoffeeScript 1.7.1
(function() {
  'use strict';
  angular.module('niblApp').controller('taskFormCtrl', function($scope, $filter, $modalInstance, taskService, projectService, initTask) {
    var submitFunc;
    $scope.projects = projectService.getList().$object;
    $scope.refreshForm = function() {
      var x;
      $scope.counter = {};
      return $scope.task = {
        availabilityType: 'anytime',
        daysAvailable: (function() {
          var _i, _results;
          _results = [];
          for (x = _i = 0; _i <= 6; x = ++_i) {
            _results.push(true);
          }
          return _results;
        })(),
        counters: []
      };
    };
    $scope.setDaysAvailable = function() {
      var x;
      if ($scope.task.availabilityType === 'anytime') {
        return $scope.task.daysAvailable = (function() {
          var _i, _results;
          _results = [];
          for (x = _i = 0; _i <= 6; x = ++_i) {
            _results.push(true);
          }
          return _results;
        })();
      } else {
        return $scope.task.daysAvailable = (function() {
          var _i, _results;
          _results = [];
          for (x = _i = 0; _i <= 6; x = ++_i) {
            _results.push(false);
          }
          return _results;
        })();
      }
    };
    $scope.submitTask = function() {
      submitFunc($scope.task);
      return $modalInstance.close();
    };
    if (initTask) {
      $scope.formName = 'Edit Task';
      $scope.task = initTask;
      return submitFunc = function() {
        return Task.edit($scope.task);
      };
    } else {
      $scope.formName = 'Edit Task';
      $scope.refreshForm();
      return submitFunc = function() {
        return taskService.post($scope.task);
      };
    }
  });

}).call(this);
