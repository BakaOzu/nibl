// Generated by CoffeeScript 1.7.1
(function() {
  'use strict';
  angular.module('niblApp').controller('tasklistCtrl', function($scope, taskService, $modal, timer) {
    $scope.tasks = taskService.all;
    $scope.interval = 'Все время';
    $scope.showDetails = function(task) {
      console.log('here');
      console.log($scope.sidebarMode, $scope.sidebarMode, $scope.currentTask);
      if ($scope.sidebarMode === 'taskEdition' || $scope.sidebarMode === 'taskCreation' && $scope.currentTask) {
        console.log('you have some unsaved changes');
      }
      $scope.sidebarMode = 'taskDetail';
      return $scope.currentTask = task;
    };
    $scope.isCurrent = function(task) {
      if ('url' in $scope.currentTask) {
        return task.url === $scope.currentTask.url;
      }
    };
    $scope.setInterval = function(interval) {
      return $scope.interval = interval;
    };
    $scope.openTaskCreationForm = function() {
      var beforeEditTask;
      $scope.sidebarMode = 'taskCreation';
      $scope.currentTask = {};
      return beforeEditTask = {};
    };
    return $scope.startPomodoro = function(task) {
      var modalInstance;
      timer.startCountdown(task);
      return modalInstance = $modal.open({
        templateUrl: "static/app/views/partials/pomo-timer.html",
        size: "lg",
        controller: 'pomoTimerCtrl'
      });
    };
  });

}).call(this);
