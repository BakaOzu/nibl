// Generated by CoffeeScript 1.7.1
(function() {
  'use strict';
  var __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  angular.module('niblApp').filter('hasTags', function($timeout) {
    return function(tasks, tags) {
      var filteredTasks, hasTag, selectedTags, tag, task, _i, _j, _len, _len1;
      if (!_.isEmpty(tasks || !_.isEmpty(tags))) {
        selectedTags = (function() {
          var _i, _len, _results;
          _results = [];
          for (_i = 0, _len = tags.length; _i < _len; _i++) {
            tag = tags[_i];
            if (tag.selected) {
              _results.push(tag.name);
            }
          }
          return _results;
        })();
        if (!_.isEmpty(selectedTags)) {
          filteredTasks = [];
          for (_i = 0, _len = tasks.length; _i < _len; _i++) {
            task = tasks[_i];
            for (_j = 0, _len1 = selectedTags.length; _j < _len1; _j++) {
              tag = selectedTags[_j];
              if (__indexOf.call(task.tags, tag) < 0) {
                hasTag = false;
                break;
              }
              hasTag = true;
            }
            if (hasTag) {
              filteredTasks.push(task);
            }
          }
          return filteredTasks;
        }
      }
      return tasks;
    };
  });

}).call(this);
